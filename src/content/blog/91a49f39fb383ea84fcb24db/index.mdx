---
title: '<T, K extends keyof T> ã‚’ã¡ã‚ƒã‚“ã¨ç†è§£ã™ã‚‹'
description: 'TypeScriptã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã‚’è¦—ã„ã¦ã„ã‚‹ã¨ã‚ˆãè¦‹ã‹ã‘ã‚‹<T, K extends keyof T>ã«ã¤ã„ã¦ã€å•é¡Œã‚’åˆ†è§£ã—ã¦ãã¡ã‚“ã¨ç†è§£ã™ã‚‹è©¦ã¿ã§ã™ã€‚'
date: 2024-06-20
tags: ['TypeScript']
image: '../../../../public/static/1200x630.png'
authors: ['Kanon']
---

# extends

ã“ã®å ´åˆã®`extends`ã®å½¹å‰²ã¯**ç¶™æ‰¿ã§ã¯ãªãã€åˆ¶ç´„**ã§ã™ã€‚

ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚

```typescript
type StringOrNumber<T extends string | number> = T
type A = StringOrNumber<string>
type B = StringOrNumber<number> 

// Type 'boolean' does not satisfy the constraint 'string | number'
type C = StringOrNumber<boolean>
```

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æŒ‡æ‘˜ãŒã¾ã•ã«ãã†ã§ã™ã‚ˆã­ã€‚`T`ã¯`the constraint 'string | number'`ã§ã™ã€‚

æ¬¡ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®å ´åˆã‚’è¦‹ã¦ã¿ã¾ã™ã€‚

```typescript
type User = {
  id: number;
  name: string;
};

const getUserName = <T extends User>(arg: T): string => arg.name;

getUserName({ id: 123, name: 'aaa' });
getUserName({ id: 123, name: 'aaa', email: 'aaaaaa' });

// Argument of type '{ id: number; }' is not assignable to parameter of type 'User'.
// Property 'name' is missing in type '{ id: number; }' but required in type 'User'
getUserName({ id: 123 });
```

ã“ã¡ã‚‰ã‚‚åŒã˜ã`type 'User'ã§ã¯'name'ãŒå¿…é ˆã§ã™`ã¨ã„ã†æ—¨ã®ã“ã¨ã‚’è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚

ã¤ã¾ã‚Šã€`K extends T`ã¨ã¯**å°‘ãªãã¨ã‚‚ã€Kã¯Tã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ»å‹ã‚’æŒã£ã¦ãªã„ã¨ãƒ€ãƒ¡**ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

# keyof

ã“ã¡ã‚‰ã¯æ¯”è¼ƒçš„ç°¡å˜ãªè©±ã§ã€`keyof`ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã‹ã‚‰ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã‚’å‹ã¨ã—ã¦è¿”ã™å‹æ¼”ç®—å­ã§ã™ã€‚

```typescript
type User = {
  id: number;
  name: string;
};
// ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã©ã¡ã‚‰ã‚‚åŒã˜æ„å‘³
type UserKey = keyof User; // "id" | "name"

const id: UserKey = "id"
const useName: UserKey = "name"

// Type '"age"' is not assignable to type 'keyof User'.
const age: UserKey = "age"
```

# `<T, K extends keyof T>` ã‚’ç†è§£ã™ã‚‹

ä¾‹ãˆã°`T`ãŒå…ˆã»ã©ã®`User`ã ã£ãŸã¨ã—ã¾ã™ã€‚ãã®ã¨ãã€`keyof User`ã¯`"id" | "name"`ã¨ãªã‚Šã¾ã™ã€‚

ã‹ã¤ã€`extends`ã‚’ãµã¾ãˆã‚‹ã¨`K extends "id" | "name"`ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

ã¤ã¾ã‚Š`K`ã¯`"id"`,`"name"`, `"id" | "name"`ã®ã„ãšã‚Œã‹ã§ã‚ã‚Œã°å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€`"age"`ã‚„`"id" | "age"`ã‚’ã¨ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚

# ã§ã€ãªã«ãŒä¾¿åˆ©ãªã®ï¼Ÿ

ãã‚Œã‚’çŸ¥ã‚‹ã«ã¯[type-challenges](https://github.com/type-challenges/type-challenges/blob/main/questions/00004-easy-pick/README.ja.md)ã®ã“ã®å•é¡Œã‚’è§£ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ã“ã®å•é¡Œã‚’è§£ããŸã‚ã«ã¯ã€`extends`, `keyof`, `Mapped Types`ã®3ã¤ã®çŸ¥è­˜ã‚’çµ„ã¿åˆã‚ã›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

> çµ„ã¿è¾¼ã¿ã®å‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£`Pick<T, K>`ã‚’ä½¿ç”¨ã›ãšã€Tã‹ã‚‰Kã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŠ½å‡ºã™ã‚‹å‹ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```typescript
interface Todo {
  title: string
  description: string
  completed: boolean
}

type TodoPreview = MyPick<Todo, 'title' | 'completed'>

const todo: TodoPreview = {
    title: 'Clean room',
    completed: false,
}
```

ã“ã“ã§ã€`MyPick`ã‚’ã“ã®ã‚ˆã†ã«å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```typescript
type MyPick<T, K extends keyof T> = {
  [key in K]: T[key]
}
```

`K`ã¯`T`ã®ã„ãšã‚Œã‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãªã‚Šã€ãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’`key`ã¨ã—ã¦å–ã‚Šå‡ºã—ã¾ã™ã€‚

ãã®ä¸Šã§ã€`T[key]`ã‚ˆã‚Šãƒ—ãƒ­ãƒ‘ãƒ†ã‚£`key`ã«å¯¾å¿œã™ã‚‹å‹ã‚’ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚

çµæœã¨ã—ã¦ã€`'title' | 'completed'`ã®ã‚ˆã†ã«`Pick`ã—ãŸã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡å®šã™ã‚Œã°ã€`Pick`ã¨åŒç­‰ã®çµæœã‚’å¾—ã‚‰ã‚Œã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ã€‚

# ãŠã‚ã‚Šã«

[type-challenges](https://github.com/type-challenges/type-challenges/blob/main/questions/00004-easy-pick/README.ja.md)ã®åˆç´šã®ã—ã‚‡ã£ã±ãªã®å•é¡ŒãŒã“ã‚Œã ã£ãŸã®ã§ã™ãŒã€æ­£ç›´ã€Œã‚€ãšã™ãã‚“â€¦ï¼Ÿã€ã¦æ„Ÿã˜ã§ã—ãŸã€‚

ã„ãã¤ã‹ã®åŸºæœ¬ã‚’çµ„ã¿åˆã‚ã›ã¦è§£ã‹ãªã„ã¨ãƒ€ãƒ¡ãªã®ã§ã€ã“ã‚Œå®Œå…¨ã«å¿œç”¨ã˜ã‚ƒã‚“â€¦ã¦ãªã‚Šã¾ã—ãŸã€‚

ãŸã ã—ã£ã‹ã‚Šè¨€èªåŒ–ã—ã¦ã„ãã¨ã€ã¨ã¦ã‚‚è‰¯ã„å‹‰å¼·ã«ã¯ãªã£ãŸã®ã§è‰¯å•ã§ã—ãŸğŸ‘

---

ã“ã®è¨˜äº‹ã¯å½“åˆZennã§å…¬é–‹ã—ãŸã‚‚ã®ã‚’å€‹äººãƒ–ãƒ­ã‚°é–‹è¨­ã«ã‚ãŸã£ã¦ç§»æ¤ã—ãŸã‚‚ã®ã§ã™ã€‚

https://zenn.dev/yskn_sid25/articles/da0547f3128308
